!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.GiantQuadtree=t()}}(function(){return function t(e,i,r){function h(n,o){if(!i[n]){if(!e[n]){var p="function"==typeof require&&require;if(!o&&p)return p(n,!0);if(s)return s(n,!0);throw new Error("Cannot find module '"+n+"'")}var u=i[n]={exports:{}};e[n][0].call(u.exports,function(t){var i=e[n][1][t];return h(i?i:t)},u,u.exports,t,e,i,r)}return i[n].exports}for(var s="function"==typeof require&&require,n=0;n<r.length;n++)h(r[n]);return h}({1:[function(t,e){"use strict";function i(t,e,i,r,h){this.objects=[],this.left=t,this.top=e,this.width=i,this.height=r,this.right=this.left+this.width,this.bottom=this.top+this.height,this.isBase=this.width/2<this.minimumSize,this.parent=h}e.exports=i,i.prototype.tl=void 0,i.prototype.tr=void 0,i.prototype.br=void 0,i.prototype.bl=void 0,i.prototype.objectLimit=200,i.prototype.minimumSize=3e3,i.prototype.clear=function(){this.objects=[],this.tl&&(this.tl.clear(),this.tr.clear(),this.br.clear(),this.bl.clear())},i.prototype.getObjects=function(){return this.tl?this.objects.concat(this.tl.getObjects(),this.tr.getObjects(),this.br.getObjects(),this.bl.getObjects()):this.objects.slice()},i.prototype.split=function(){var t=this.width/2,e=this.height/2,r=this.left,h=this.top;this.tl=new i(r,h,t,e,this),this.tr=new i(r+t,h,t,e,this),this.br=new i(r+t,h+e,t,e,this),this.bl=new i(r,h+e,t,e,this)},i.prototype.parentNode=function(t){var e,i=this;return t.left<i.left?e=t.top<i.top?i.grow(i.width,i.height):i.grow(i.width,0):t.left+t.width>i.left+i.width?e=t.top<i.top?i.grow(0,i.height):i.grow(0,0):t.top<i.top?e=i.grow(0,i.height):t.top+t.height>i.top+i.height&&(e=i.grow(0,0)),e?e.parentNode(t):i},i.prototype.getQuadrantAt=function(t,e){if(!this.tl)return this;var i=this.left+this.width/2,r=this.top+this.height/2;return i>t?r>e?this.tl.tl&&this.tl.getQuadrantAt(t,e)||this.tl:this.bl.tl&&this.bl.getQuadrantAt(t,e)||this.bl:r>e?this.tr.tl&&this.tr.getQuadrantAt(t,e)||this.tr:this.br.tl&&this.br.getQuadrantAt(t,e)||this.br},i.prototype.getInteractableObjects=function(t,e,i,r){if(!this.tl)return this.objects.slice();for(var h=this.getQuadrant(t,e,i,r),s=[h.objects],n=[h],o=h.parent;o;)s.push(o.objects),n.push(o),o=o.parent;if(h.tl){var p=h.getQuadrantAt(t,e);~n.indexOf(p)||(n.push(p),s.push(p.objects),p.parent&&!~n.indexOf(p.parent)&&(n.push(p.parent),s.push(p.parent.objects))),p=h.getQuadrantAt(t+i,e),~n.indexOf(p)||(n.push(p),s.push(p.objects),p.parent&&!~n.indexOf(p.parent)&&(n.push(p.parent),s.push(p.parent.objects))),p=h.getQuadrantAt(t+i,e+r),~n.indexOf(p)||(n.push(p),s.push(p.objects),p.parent&&!~n.indexOf(p.parent)&&(n.push(p.parent),s.push(p.parent.objects))),p=h.getQuadrantAt(t,e+r),~n.indexOf(p)||(n.push(p),s.push(p.objects),p.parent&&!~n.indexOf(p.parent)&&s.push(p.parent.objects))}return Array.prototype.concat.apply([],s)},i.prototype.getQuadrant=function(t,e,i,r){if(!this.tl)return this;var h=this.left+this.width/2,s=this.top+this.height/2,n=s>e&&s>e+r,o=e>s;if(h>t&&h>t+i){if(n)return this.tl.tl&&this.tl.getQuadrant(t,e,i,r)||this.tl;if(o)return this.bl.tl&&this.bl.getQuadrant(t,e,i,r)||this.bl}else if(t>h){if(n)return this.tr.tl&&this.tr.getQuadrant(t,e,i,r)||this.tr;if(o)return this.br.tl&&this.br.getQuadrant(t,e,i,r)||this.br}return this},i.prototype.insert=function(t){var e,i,r,h,s,n;if(n=this.parentNode(t),e=n.getQuadrant(t.left,t.top,t.width,t.height),e!==n)e.insert(t);else if(s=n.objects,s.push(t),i=0,r=s.length,!this.isBase&&r>n.objectLimit){for(n.tl||n.split(),h=[];r>i;i++)t=n.objects[i],e=n.getQuadrant(t.left,t.top,t.width,t.height),e!==n?e.insert(t):h.push(t);n.objects=h}return n},i.prototype.grow=function(t,e){var r=this.left-t,h=this.top-e,s=new i(r,h,2*this.width,2*this.height);return this.parent=s,t?e?s.br=this:s.tr=this:e?s.bl=this:s.tl=this,s.tl=s.tl||new i(r,h,this.width,this.height,this),s.tr=s.tr||new i(r+this.width,h,this.width,this.height,this),s.br=s.br||new i(r+this.width,h+this.height,this.width,this.height,this),s.bl=s.bl||new i(r,h+this.height,this.width,this.height,this),s}},{}],2:[function(t,e){"use strict";function i(t,e,r,h,s){if(!s.tl)return s;if(t<s.tr.left){if(r<s.tr.left){if(h<s.bl.top)return i(t,e,r,h,s.tl);if(e>s.bl.top)return i(t,e,r,h,s.bl)}}else{if(h<s.br.top)return i(t,e,r,h,s.tr);if(e>s.br.top)return i(t,e,r,h,s.br)}return s}var r=t("./node"),h=e.exports=function(t,e){t&&(this.width=t,this.height=e?e:t),this.reset()};h.create=function(t,e){var i=new h(t,e);return h.getApi(i)},h.getApi=function(t){var e={};return e.insert=t.insert.bind(t),e.reset=t.reset.bind(t),e.getObjects=t.getObjects.bind(t),e.get=e.getObjects,e.prune=t.prune.bind(t),e},h.prototype.width=1e4,h.prototype.height=1e4,h.prototype.reset=function(t,e){t=t||0,e=e||0,this.top=new r(t,e,this.width,this.height)},h.prototype.insert=function(t){this.top=this.top.insert(t)},h.prototype.getContainingNode=function(t,e,r,h){return t<this.top.left||e<this.top.top||r>this.top.right||h>this.top.bottom?void 0:i(t,e,r,h,this.top)},h.prototype.minimumSize=3e3,h.prototype.getInteractableObjects=function(t,e,i,r){function h(t,e,i,r){var h=p.getContainingNode(t,e,i,r);h&&!~a.indexOf(h.objects)&&a.push(h.objects)}var s,n,o,p=this,u=this.minimumSize,f=this.getContainingNode(t,e,t+1,e+1),a=f?[f.getObjects()]:[];return!f||f.right<i?(s=this.getContainingNode(i-1,e,i,e+1),s?a.push(s.getObjects()):s=f):s=f,!f||f.bottom<r?(n=this.getContainingNode(t,r-1,t+1,r),n?a.push(n.getObjects()):n=f):n=f,!s||s.bottom<r?!n||n.right<i?(o=this.getContainingNode(i-1,r-1,i,r),o?a.push(o.getObjects()):o=n):o=n:o=s,f!==s&&h(t,e,i,e+1),s!==o&&h(i-1,e,i,r),o!==n&&h(t,r-1,i,r),n!==f&&h(t,e,t+1,r),f&&(t-u<f.left&&h(t-u,e,t+1,e+1),e-u<f.top&&h(t,e-u,t+1,e+1)),s&&(s!==f&&e-u<s.top&&h(i-1,e-u,i,e+1),i+u>s.right&&h(i-1,e,i+u,e+1)),o&&(o!==s&&i+u>o.right&&h(i-1,r-1,i+u,r),r+u>o.bottom&&h(i-1,r-1,i,r+u)),n&&(n!==o&&r+u>n.bottom&&h(t,r-1,t+1,r+u),n!==f&&t-u<n.left&&h(t-u,r-1,t+1,r)),Array.prototype.concat.apply([],a)},h.prototype.getObjects=function(t,e,i,r){if(void 0!==t){for(var h,s=e+r,n=t+i,o=this.getInteractableObjects(t,e,n,s),p=o.length,u=[];p--;)h=o[p],(e<=h.top?s>=h.top:h.bottom>=e)&&(t<=h.left?n>=h.left:h.right>=t)&&u.push(h);return u}return this.top.getObjects()},h.prototype.prune=function(t,e,i,r){for(var h,s=t+i,n=e+r,o=[],p=[],u=this.top.getObjects(),f=0,a=u.length;a>f;f++)h=u[f],h.left<t||h.top<e||h.left+h.width>s||h.top+h.height>n?o.push(h):p.push(h);if(p.length)for(this.reset(p[0].left,p[0].top),f=0,a=p.length;a>f;f++)this.insert(p[f]);else this.reset();return o}},{"./node":1}]},{},[2])(2)});
//# sourceMappingURL=GiantQuadtree.min.js.map